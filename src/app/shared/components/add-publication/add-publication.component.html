<ion-header>
  <ion-toolbar>
    <ion-title>Nouvelle publication</ion-title>
    <ion-buttons slot="start">
      <ion-button (click)="dismissModal()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="onSubmit()" [disabled]="!isValid" color="primary">
        Publier
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="postForm" (ngSubmit)="onSubmit()">
    <ion-item lines="none">
      <ion-textarea
        formControlName="content"
        placeholder="Que voulez-vous partager ?"
        [rows]="4"
        [autoGrow]="true"
        class="custom-textarea"
      ></ion-textarea>
    </ion-item>

    <!-- PrÃ©visualisation des images -->
    <ion-grid *ngIf="images.length > 0">
      <ion-row>
        <ion-col size="4" *ngFor="let image of images; let i = index">
          <div class="image-container">
            <img [src]="image.src" alt="Image preview" class="preview-image" />
            <ion-button
              fill="clear"
              class="delete-button"
              (click)="removeImage(i)"
            >
              <ion-icon name="close-circle" color="danger"></ion-icon>
            </ion-button>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Bouton pour ajouter des images -->
    <ion-item
      lines="none"
      class="ion-margin-top"
      *ngIf="images.length < maxImages"
    >
      <ion-button expand="block" fill="clear" (click)="selectImages()">
        <ion-icon name="image-outline" slot="start"></ion-icon>
        Choisir des images
      </ion-button>
    </ion-item>
  </form>
</ion-content>
